<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Diary App</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
      .banner { background:#eee; padding:.5rem .75rem; margin-bottom:1rem; border-radius:8px; display:inline-block;}
      .flashes { color: #b00; }
    </style>
</head>
<body>
    <div class="banner">{{ BRANCH_BANNER }}</div>
    <h1>My Diary</h1>

    {% if logged_in %}
      <h2>Welcome, you are logged in!</h2>
      <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
      <a href="{{ url_for('login') }}">Login</a>
    {% endif %}

    <form method="POST" action="{{ url_for('add_entry') }}">
      <textarea name="content" rows="4" cols="40" placeholder="What happened today?"></textarea><br>
      <label>Happiness:
        <select name="happiness">
          <option>😃</option>
          <option>🙂</option>
          <option>😐</option>
          <option>🙁</option>
          <option>😢</option>
        </select>
      </label>
      <button type="submit">Add Entry</button>
    </form>

    <h3>Entries</h3>
    <ul>
    {% for e in entries %}
      <li>{{ e.created_at.strftime("%Y-%m-%d %H:%M") }} — {{ e.happiness }} — {{ e.content }}</li>
    {% else %}
      <li>No entries yet.</li>
    {% endfor %}
    </ul>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul class="flashes">
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
</body>
</html>